<!-- templates/skeletons/enhanced-analytics.html -->
<!-- NOTE: This is a skeleton. CSS and JS need to be provided separately. -->
<!-- Placeholders like {{VARIABLE_NAME}}, {{CHART_ID_RADAR}}, {{SALES_TABLE_ROWS_HTML}} will be replaced by Gemini. -->
<!-- Data attributes like data-chart-data='{{RADAR_CHART_DATA_JSON}}' will hold data for client-side JS. -->

<div class="enhanced-analytics-container">
  <div class="section-header">
    <h2 class="section-title">{{TITLE}}</h2>
  </div>

  <!-- RADAR CHART SECTION (Conditional based on options?) -->
  <div class="analytics-section radar-chart-section" data-visibility="{{SHOW_RADAR}}">
    <div class="section-header">
      <h3>Item Metrics Analysis</h3>
      <p class="section-description">Multi-dimensional analysis of key value factors</p>
    </div>
    <div class="chart-card">
      <div class="chart-card-header">
        <h4>Value Metrics Radar</h4>
      </div>
      <div class="chart-content">
        <div class="radar-wrapper" data-chart-data-radar="{{RADAR_CHART_DATA_JSON}}">
          <canvas id="{{CHART_ID_RADAR}}" width="400" height="400"></canvas>
        </div>
        <!-- Legends might be static or generated by client-side JS -->
      </div>
    </div>
    <div class="metrics-grid">
      <div class="metric-card">
        <div class="metric-header"><h4>Condition</h4></div>
        <div class="metric-value">{{CONDITION_SCORE}}%</div>
        <div class="metric-footer"><div class="metric-description">Physical state assessment</div></div>
      </div>
      <div class="metric-card">
        <div class="metric-header"><h4>Rarity</h4></div>
        <div class="metric-value">{{RARITY_SCORE}}%</div>
        <div class="metric-footer"><div class="metric-description">Availability in the market</div></div>
      </div>
      <div class="metric-card">
        <div class="metric-header"><h4>Market Demand</h4></div>
        <div class="metric-value">{{MARKET_DEMAND_SCORE}}%</div>
        <div class="metric-footer"><div class="metric-description">Current collector interest</div></div>
      </div>
      <div class="metric-card">
        <div class="metric-header"><h4>Historical Significance</h4></div>
        <div class="metric-value">{{HISTORICAL_SIGNIFICANCE}}%</div>
        <div class="metric-footer"><div class="metric-description">Cultural and historical impact</div></div>
      </div>
      <div class="metric-card">
        <div class="metric-header"><h4>Investment Potential</h4></div>
        <div class="metric-value">{{INVESTMENT_POTENTIAL}}%</div>
        <div class="metric-footer"><div class="metric-description">Projected value growth</div></div>
      </div>
      <div class="metric-card">
        <div class="metric-header"><h4>Provenance Strength</h4></div>
        <div class="metric-value">{{PROVENANCE_STRENGTH}}%</div>
        <div class="metric-footer"><div class="metric-description">History of ownership quality</div></div>
      </div>
    </div>
  </div>

  <!-- PRICE HISTORY SECTION (Conditional) -->
  <div class="analytics-section price-history-section" data-visibility="{{SHOW_HISTORY}}">
    <div class="section-header">
      <h3>Price History Analysis</h3>
      <p class="section-description">Historical price trends for comparable items</p>
    </div>
    <div class="chart-card">
      <div class="chart-card-header">
        <h4>Market Price History</h4>
        <div class="price-trend-badge {{TREND_CLASS}}">{{PRICE_TREND}} annual</div>
      </div>
      <div class="chart-content">
        <div class="price-chart-wrapper" data-chart-data-history="{{HISTORY_CHART_DATA_JSON}}">
          <canvas id="{{CHART_ID_PRICE}}" height="300"></canvas>
        </div>
        <!-- Legends might be static or generated by client-side JS -->
      </div>
    </div>
    <div class="price-highlights">
      <div class="highlight-card">
        <div class="highlight-header">Current Value</div>
        <div class="highlight-value">{{VALUE_FORMATTED}}</div>
      </div>
      <div class="highlight-card">
        <div class="highlight-header">5-Year Change</div>
        <div class="highlight-value {{TREND_CLASS}}">{{PRICE_TREND}}</div>
      </div>
      <div class="highlight-card">
        <div class="highlight-header">Market Prediction</div>
        <div class="highlight-value">{{PREDICTED_VALUE_FORMATTED}} <span class="prediction-year">({{NEXT_YEAR}})</span></div>
      </div>
    </div>
  </div>

  <!-- INTERACTIVE STATISTICS SECTION (Conditional) -->
  <div class="analytics-section statistics-section" data-visibility="{{SHOW_STATS}}">
    <div class="section-header">
      <h3>Market Statistics Analysis</h3>
      <p class="section-description">Comprehensive statistical analysis of market data</p>
    </div>
    <div class="chart-card">
      <div class="chart-card-header"><h4>Statistical Summary</h4></div>
      <div class="chart-content">
        <div class="statistics-summary">
          <p>Market analysis reveals {{TOTAL_COUNT}} comparable items with an average value of {{AVG_PRICE_FORMATTED}}.</p>
          <p>Your item's value of {{VALUE_FORMATTED}} places it in the {{PERCENTILE}} percentile, with a {{PRICE_TREND}} average annual growth rate.</p>
          <p>Market confidence: <strong>{{CONFIDENCE_LEVEL}}</strong></p>
        </div>
      </div>
    </div>
    <div class="chart-card">
      <div class="chart-card-header"><h4>Market Position Analysis</h4></div>
      <div class="chart-content">
        <div class="market-position-container" data-percentile="{{PERCENTILE_NUMBER}}" data-trend-positive="{{IS_TREND_POSITIVE}}">
          <div class="market-gauge-wrapper">
            <div class="gauge-container">
              <div class="gauge">
                <div class="gauge-fill" style="--percentage: {{PERCENTILE_NUMBER}};"></div>
                <div class="gauge-center"></div>
                <div class="gauge-needle" style="--rotation: {{PERCENTILE_ROTATION}}deg;"></div>
              </div>
              <div class="gauge-labels">
                <span class="gauge-label low">Low</span>
                <span class="gauge-label medium">Medium</span>
                <span class="gauge-label high">High</span>
                <span class="gauge-label premium">Premium</span>
              </div>
              <div class="gauge-value">{{PERCENTILE}} Percentile</div>
              <div class="gauge-description">Your item is in the {{APPRECIATION_STATUS}} market segment</div>
            </div>
          </div>
          <div class="market-position-highlights">
             <!-- Highlight cards with static labels and dynamic values -->
             <div class="position-highlight-card">
                <div class="highlight-icon"><!-- SVG --></div>
                <h5>Market Timing</h5>
                <div class="highlight-value {{TREND_CLASS}}">{{MARKET_TIMING}}</div>
                <p>Based on current market conditions</p>
              </div>
              <div class="position-highlight-card">
                 <div class="highlight-icon"><!-- SVG --></div>
                 <h5>Market Demand</h5>
                 <div class="highlight-value">{{MARKET_DEMAND_SCORE}}%</div>
                 <p>Current collector interest level</p>
              </div>
              <div class="position-highlight-card">
                 <div class="highlight-icon"><!-- SVG --></div>
                 <h5>Rarity Impact</h5>
                 <div class="highlight-value">{{RARITY_SCORE}}%</div>
                 <p>Effect of item scarcity on value</p>
              </div>
          </div>
        </div>
      </div>
    </div>

    <div class="section-header item-metrics-header">
      <h3>Item Metrics Analysis</h3>
      <p class="section-description">Multi-dimensional analysis of key value factors</p>
    </div>

    <div class="market-analysis-grid">
      <div class="chart-card distribution-card">
        <div class="chart-card-header"><h4>Price Distribution</h4></div>
        <div class="chart-content">
          <div class="modern-chart-container" data-histogram-data="{{HISTOGRAM_DATA_JSON}}">
            <div class="modern-chart-bars">
              <!-- Client-side JS will generate bars from data-histogram-data -->
              {{HISTOGRAM_BARS_HTML}} <!-- Gemini might generate this or client-side JS -->
            </div>
            <div class="chart-axis">
               <!-- Client-side JS will generate axis labels -->
               {{HISTOGRAM_AXIS_HTML}} <!-- Gemini might generate this or client-side JS -->
            </div>
            <div class="your-value-marker" style="left: calc({{TARGET_POSITION}}% - 1px);">
              <div class="marker-line"></div>
              <div class="marker-label">{{VALUE_FORMATTED}}</div>
            </div>
          </div>
        </div>
      </div>

      <div class="metrics-grid stats-metrics-grid">
        <div class="metric-card shadcn-card">
          <div class="metric-header">
            <h4>Market Averages</h4>
            <span class="trend-badge {{TREND_CLASS}}">{{PRICE_TREND}} annual</span>
          </div>
          <div class="metric-values">
            <div class="metric-value-row"><span class="metric-label">Mean</span><span class="metric-value">{{AVG_PRICE_FORMATTED}}</span></div>
            <div class="metric-value-row"><span class="metric-label">Median</span><span class="metric-value">{{MEDIAN_PRICE_FORMATTED}}</span></div>
          </div>
          <div class="metric-footer"><div class="metric-description">Based on {{COUNT}} comparable items</div></div>
        </div>
        <div class="metric-card shadcn-card">
           <div class="metric-header"><h4>Price Range & Variation</h4></div>
           <div class="price-range-display">
             <div class="price-range-value">{{PRICE_MIN_FORMATTED}} - {{PRICE_MAX_FORMATTED}}</div>
             <div class="price-range-bar" data-target-position="{{TARGET_POSITION}}">
               <!-- Client-side JS to render indicators -->
             </div>
           </div>
           <div class="metric-footer">
             <div class="badge">CV: {{COEFFICIENT_VARIATION}}%</div>
             <div class="badge secondary">SD: {{STD_DEV_FORMATTED}}</div>
           </div>
         </div>
         <div class="metric-card shadcn-card highlighted">
            <div class="metric-header"><h4>Investment Potential</h4></div>
            <div class="investment-rating-display">
              <div class="investment-rating">
                <span class="rating-value">{{INVESTMENT_POTENTIAL}}%</span>
                <span class="rating-label">Potential</span>
              </div>
              <div class="investment-scale"><div class="scale-bar" style="--fill-width: {{INVESTMENT_POTENTIAL}}%"></div></div>
            </div>
            <div class="metric-footer"><div class="metric-description">Based on market trends and item characteristics</div></div>
         </div>
         <div class="metric-card shadcn-card">
           <div class="metric-header"><h4>Market Confidence</h4></div>
           <div class="confidence-display" data-confidence-level="{{CONFIDENCE_LEVEL_NUMERIC}}">
             <div class="confidence-indicator {{CONFIDENCE_LEVEL_CLASS}}">
                <!-- Client-side JS to generate dots -->
                {{CONFIDENCE_DOTS_HTML}} <!-- Or Gemini generates -->
             </div>
             <div class="confidence-value">{{CONFIDENCE_LEVEL}}</div>
           </div>
           <div class="metric-footer"><div class="metric-description">Based on sample size and data consistency</div></div>
         </div>
      </div>

      <div class="chart-card advanced-data-table-card" data-sales-data="{{SALES_DATA_JSON}}">
        <div class="chart-card-header"><h4>Comprehensive Market Data</h4></div>
        <div class="sales-table-container">
          <table class="sales-table advanced-table">
            <thead>
              <tr>
                <th class="sortable" data-sort="title">Item <span class="sort-icon">↕</span></th>
                <th class="sortable" data-sort="house">Auction House <span class="sort-icon">↕</span></th>
                <th class="sortable" data-sort="date">Date <span class="sort-icon">↕</span></th>
                <th class="sortable" data-sort="price">Price <span class="sort-icon">↕</span></th>
                <th class="sortable" data-sort="diff">Difference <span class="sort-icon">↕</span></th>
              </tr>
            </thead>
            <tbody>
              <!-- Client-side JS to generate rows from data-sales-data -->
              {{SALES_TABLE_ROWS_HTML}} <!-- Or Gemini generates -->
            </tbody>
          </table>
        </div>
        <div class="table-footer">
           <!-- Pagination logic handled by client-side JS -->
        </div>
      </div>
    </div>
  </div>
</div> 